{"version":3,"sources":["MaterialBottomTabView.tsx"],"names":["SafeAreaProviderCompat","CommonActions","Link","useLinkBuilder","useTheme","React","Platform","StyleSheet","Text","BottomNavigation","DarkTheme","DefaultTheme","useSafeAreaInsets","MaterialCommunityIcons","require","default","e","isErrorLogged","name","color","size","selectionColor","_0","onLayout","_1","rest","test","message","console","error","warn","styles","icon","fontSize","MaterialBottomTabViewInner","state","navigation","descriptors","insets","dark","colors","buildLink","theme","useMemo","t","surface","card","index","dispatch","navigate","routes","merge","target","key","route","render","OS","onPress","accessibilityRole","borderless","centered","_2","rippleColor","_3","style","params","metaKey","altKey","ctrlKey","shiftKey","button","preventDefault","touchable","undefined","focused","options","tabBarIcon","tabBarLabel","title","tabBarColor","tabBarBadge","tabBarAccessibilityLabel","tabBarTestID","event","emit","type","canPreventDefault","defaultPrevented","MaterialBottomTabView","props","create","backgroundColor","display","justifyContent"],"mappings":"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","sourcesContent":["import { SafeAreaProviderCompat } from '@react-navigation/elements';\nimport {\n  CommonActions,\n  Link,\n  ParamListBase,\n  Route,\n  TabNavigationState,\n  useLinkBuilder,\n  useTheme,\n} from '@react-navigation/native';\nimport * as React from 'react';\nimport { Platform, StyleSheet, Text } from 'react-native';\nimport { BottomNavigation, DarkTheme, DefaultTheme } from 'react-native-paper';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport type {\n  MaterialBottomTabDescriptorMap,\n  MaterialBottomTabNavigationConfig,\n  MaterialBottomTabNavigationHelpers,\n} from '../types';\n\ntype Props = MaterialBottomTabNavigationConfig & {\n  state: TabNavigationState<ParamListBase>;\n  navigation: MaterialBottomTabNavigationHelpers;\n  descriptors: MaterialBottomTabDescriptorMap;\n};\n\ntype Scene = { route: { key: string } };\n\n// Optionally require vector-icons referenced from react-native-paper:\n// https://github.com/callstack/react-native-paper/blob/4b26429c49053eaa4c3e0fae208639e01093fa87/src/components/MaterialCommunityIcon.tsx#L14\nlet MaterialCommunityIcons: React.ComponentType<\n  React.ComponentProps<\n    typeof import('react-native-vector-icons/MaterialCommunityIcons').default\n  >\n>;\n\ntry {\n  // Optionally require vector-icons\n  MaterialCommunityIcons =\n    require('react-native-vector-icons/MaterialCommunityIcons').default;\n} catch (e) {\n  let isErrorLogged = false;\n\n  // Fallback component for icons\n  MaterialCommunityIcons = ({\n    name,\n    color,\n    size,\n    selectionColor: _0,\n    onLayout: _1,\n    ...rest\n  }) => {\n    if (!isErrorLogged) {\n      if (\n        !/(Cannot find module|Module not found|Cannot resolve module)/.test(\n          e.message\n        )\n      ) {\n        console.error(e);\n      }\n\n      console.warn(\n        `Tried to use the icon '${name}' in a component from '@react-navigation/material-bottom-tabs', but 'react-native-vector-icons/MaterialCommunityIcons' could not be loaded.`,\n        `To remove this warning, try installing 'react-native-vector-icons' or use another method to specify icon: https://reactnavigation.org/docs/material-bottom-tab-navigator/#tabbaricon.`\n      );\n\n      isErrorLogged = true;\n    }\n\n    return (\n      <Text {...rest} style={[styles.icon, { color, fontSize: size }]}>\n        â–¡\n      </Text>\n    );\n  };\n}\n\nfunction MaterialBottomTabViewInner({\n  state,\n  navigation,\n  descriptors,\n  ...rest\n}: Props) {\n  const insets = useSafeAreaInsets();\n  const { dark, colors } = useTheme();\n  const buildLink = useLinkBuilder();\n\n  const theme = React.useMemo(() => {\n    const t = dark ? DarkTheme : DefaultTheme;\n\n    return {\n      ...t,\n      colors: {\n        ...t.colors,\n        ...colors,\n        surface: colors.card,\n      },\n    };\n  }, [colors, dark]);\n\n  return (\n    <BottomNavigation\n      {...rest}\n      theme={theme}\n      navigationState={state}\n      onIndexChange={(index: number) =>\n        navigation.dispatch({\n          ...CommonActions.navigate({\n            name: state.routes[index].name,\n            merge: true,\n          }),\n          target: state.key,\n        })\n      }\n      renderScene={({ route }) => descriptors[route.key].render()}\n      renderTouchable={\n        Platform.OS === 'web'\n          ? ({\n              onPress,\n              route,\n              accessibilityRole: _0,\n              borderless: _1,\n              centered: _2,\n              rippleColor: _3,\n              style,\n              ...rest\n            }) => {\n              return (\n                <Link\n                  {...rest}\n                  // @ts-expect-error: to could be undefined, but it doesn't affect functionality\n                  to={buildLink(route.name, route.params)}\n                  accessibilityRole=\"link\"\n                  onPress={(e: any) => {\n                    if (\n                      !(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) && // ignore clicks with modifier keys\n                      (e.button == null || e.button === 0) // ignore everything but left clicks\n                    ) {\n                      e.preventDefault();\n                      onPress?.(e);\n                    }\n                  }}\n                  style={[styles.touchable, style]}\n                />\n              );\n            }\n          : undefined\n      }\n      renderIcon={({ route, focused, color }) => {\n        const { options } = descriptors[route.key];\n\n        if (typeof options.tabBarIcon === 'string') {\n          return (\n            <MaterialCommunityIcons\n              name={options.tabBarIcon}\n              color={color}\n              size={24}\n              style={styles.icon}\n            />\n          );\n        }\n\n        if (typeof options.tabBarIcon === 'function') {\n          return options.tabBarIcon({ focused, color });\n        }\n\n        return null;\n      }}\n      getLabelText={({ route }: Scene) => {\n        const { options } = descriptors[route.key];\n\n        return options.tabBarLabel !== undefined\n          ? options.tabBarLabel\n          : options.title !== undefined\n          ? options.title\n          : (route as Route<string>).name;\n      }}\n      getColor={({ route }) => descriptors[route.key].options.tabBarColor}\n      getBadge={({ route }) => descriptors[route.key].options.tabBarBadge}\n      getAccessibilityLabel={({ route }) =>\n        descriptors[route.key].options.tabBarAccessibilityLabel\n      }\n      getTestID={({ route }) => descriptors[route.key].options.tabBarTestID}\n      onTabPress={({ route, preventDefault }) => {\n        const event = navigation.emit({\n          type: 'tabPress',\n          target: route.key,\n          canPreventDefault: true,\n        });\n\n        if (event.defaultPrevented) {\n          preventDefault();\n        }\n      }}\n      safeAreaInsets={insets}\n    />\n  );\n}\n\nexport default function MaterialBottomTabView(props: Props) {\n  return (\n    <SafeAreaProviderCompat>\n      <MaterialBottomTabViewInner {...props} />\n    </SafeAreaProviderCompat>\n  );\n}\n\nconst styles = StyleSheet.create({\n  icon: {\n    backgroundColor: 'transparent',\n  },\n  touchable: {\n    display: 'flex',\n    justifyContent: 'center',\n  },\n});\n"]}